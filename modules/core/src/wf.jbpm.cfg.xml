<?xml version="1.0" encoding="UTF-8"?>

<jbpm-configuration>

    <process-engine-context>

        <repository-service />
        <repository-cache/>
        <execution-service/>
        <!--<history-service/>-->

        <command-service>
            <environment-interceptor />
        </command-service>

        <command-service name="newTxRequiredCommandService">
            <environment-interceptor policy="requiresNew" />
            <spring-transaction-interceptor />
        </command-service>

        <command-service name="txRequiredCommandService">
            <environment-interceptor />
        </command-service>

        <hibernate-session-factory/>

        <object class="org.jbpm.pvm.internal.id.DatabaseDbidGenerator">
            <field name="commandService">
                <ref object="newTxRequiredCommandService"/>
            </field>
        </object>

        <object class="org.jbpm.pvm.internal.id.DatabaseIdComposer" init="eager"/>

        <script-manager default-expression-language="juel"
                        default-script-language="juel">
            <script-language name="juel" factory="org.jbpm.pvm.internal.script.JuelScriptEngineFactory"/>
        </script-manager>

        <types resource="jbpm.variable.types.xml"/>

        <deployer-manager>
            <jpdl-deployer />
        </deployer-manager>

    </process-engine-context>

    <transaction-context>
        <hibernate-session current="true" />
        <repository-session/>
        <db-session/>
    </transaction-context>

</jbpm-configuration>
