<window
        xmlns="http://schemas.haulmont.com/cuba/4.0/window.xsd"
        class="com.haulmont.workflow.web.ui.usergroup.UserGroupBrowser"
        messagesPack="com.haulmont.workflow.web.ui.usergroup"
        caption="msg://userGroupBrowser.caption"
        focusComponent="genericFilter"
        >

    <dsContext>
        <collectionDatasource id="userGroupsDs" class="com.haulmont.workflow.core.entity.UserGroup" view="browse">
            <query>
                select ug from wf$UserGroup ug order by ug.name
            </query>
        </collectionDatasource>
        <collectionDatasource id="usersDs" class="com.haulmont.cuba.security.entity.User" view="_local" fetchMode="ALL">
            <query>
                <![CDATA[select u from sec$User u, wf$UserGroup ug where u member of ug.users and ug.id = :ds$userGroupsDs]]>
            </query>
        </collectionDatasource>
    </dsContext>

    <layout>
        <vbox expand="split" spacing="true">
            <vbox expand="genericFilter" stylename="edit-area">
                <filter id="genericFilter" datasource="userGroupsDs">
                    <properties include=".*"/>
                </filter>
            </vbox>

            <split id="split" orientation="horizontal" pos="30">
                <vbox id="table-panel" expand="userGroupsTable" spacing="true" margin="false;true;false;false;">
                    <table id="userGroupsTable" editable="false">
                        <buttonsPanel>
                            <button action="userGroupsTable.create" icon="icons/create.png"/>
                            <button action="userGroupsTable.edit" icon="icons/edit.png"/>
                            <button action="userGroupsTable.remove" icon="icons/remove.png"/>
                        </buttonsPanel>
                        <rowsCount/>
                        <columns>
                            <column id="name" caption="msg://name"/>
                        </columns>
                        <rows datasource="userGroupsDs"/>
                    </table>
                </vbox>

                <vbox id="usersPanel" expand="usersTable" spacing="true" margin="false;false;false;true;">
                    <buttonsPanel>
                        <button action="usersTable.add" icon="icons/add.png"/>
                        <button action="usersTable.remove" icon="icons/remove.png"/>
                    </buttonsPanel>
                    <table id="usersTable" editable="false">
                        <columns>
                            <column id="name" caption="msg://user"/>
                            <column id="position" caption="msg://position"/>
                        </columns>
                        <rows datasource="usersDs"/>
                    </table>
                </vbox>
            </split>
        </vbox>
    </layout>
</window>