<window
        xmlns="http://www.haulmont.com/schema/cuba/gui/window.xsd"
        class="com.haulmont.workflow.web.ui.base.ResolutionForm"
        messagesPack="com.haulmont.workflow.web.ui.base"
        caption="msg://resolutionEditCaption">

    <dsContext>
        <collectionDatasource id="assignmentDs" class="com.haulmont.workflow.core.entity.Assignment"
                              view="resolution-edit">
            <datasourceClass>com.haulmont.workflow.web.ui.base.AssignmentCollectionDatasource</datasourceClass>
            <collectionDatasource id="attachmentsDs" property="attachments"/>
        </collectionDatasource>
    </dsContext>

    <#assign width=400>
    <layout expand="mainPane">
        <vbox id="mainPane" margin="true" stylename="edit-area" expand="attachmentsPane">
            <grid spacing="true" width="100%">
                <columns>
                    <column flex="1"/>
                    <column flex="1"/>
                </columns>
                <rows>
                    <row>
                        <label value="msg://transition"/>
                        <textField id="outcomeText" width="${width}"/>
                    </row>
                    <row>
                        <label value="msg://comment"/>
                        <textField id="commentText" datasource="assignmentDs" property="comment"
                                   width="${width}" rows="6"/>
                    </row>
                </rows>
            </grid>
            <vbox id="attachmentsPane" expand="attachmentsTable">
                <label value="msg://attachments"/>
                <hbox align="MIDDLE_LEFT" spacing="true" margin="true">
                    <popupButton id="createAttachBtn" caption="msg://addAttachment"/>
                    <button id="editAttach" action="attachmentsTable.edit" icon="icons/edit.png"/>
                    <button id="removeAttach" action="attachmentsTable.remove" icon="icons/remove.png"/>
                    <button id="copyAttach" icon="icons/copy.png"/>
                    <button id="pasteAttach" icon="icons/paste.png"/>    
                </hbox>
                <table id="attachmentsTable" editable="false" sortable="true" multiselect="true">
                    <columns>
                        <column id="name" caption="msg://attachName"/>
                        <column id="file.name" caption="msg://fileName"/>
                        <column id="attachType.locName" caption="msg://typeName"/>
                        <column id="file.size" caption="msg://fileSize"/>
                    </columns>
                    <rows datasource="attachmentsDs"/>
                </table>
            </vbox>
        </vbox>
        <vbox margin="true">
            <iframe id="windowActions" src="/com/haulmont/cuba/gui/edit-window.actions.xml"/>
        </vbox>
    </layout>
</window>
