<window
        xmlns="http://schemas.haulmont.com/cuba/4.0/window.xsd"
        class="com.haulmont.workflow.web.ui.base.CardCommentFrame"
        messagesPack="com.haulmont.workflow.web.ui.base"
        caption="msg://cardCommentFrame.caption"
        >

    <dsContext>
        <hierarchicalDatasource id="commentDs" class="com.haulmont.workflow.core.entity.CardComment"
                                hierarchyProperty="parent" view="browse">
            <query>
                <![CDATA[select cc from wf$CardComment cc where cc.card.id = :param$ITEM order by cc.createTs]]>
            </query>
        </hierarchicalDatasource>
    </dsContext>

    <layout>
        <vbox margin="true" height="100%" expand="commentGroupBox" spacing="true">
            <button id="add" icon="icons/create.png"/>
            <groupBox id="commentGroupBox" stylename="edit-area" expand="commentHBox">
                <hbox id="commentHBox" expand="treeComment" spacing="false" height="100%" width="100%">
                    <widgetsTree id="treeComment" height="100%">
                        <items datasource="commentDs"/>
                    </widgetsTree>
                </hbox>
            </groupBox>
        </vbox>
    </layout>
</window>