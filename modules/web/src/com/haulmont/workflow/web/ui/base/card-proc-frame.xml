<window xmlns="http://www.haulmont.com/schema/cuba/gui/window.xsd"
        class="com.haulmont.workflow.web.ui.base.CardProcFrame"
        messagesPack="com.haulmont.workflow.web.ui.base"
        >

    <dsContext>
        <collectionDatasource id="procDs" class="com.haulmont.workflow.core.entity.Proc" view="_local">
            <query>
                select p from wf$Proc p
                where p.cardTypes is null or p.cardTypes = '' or p.cardTypes like :custom$cardType
                order by p.name
            </query>
        </collectionDatasource>
    </dsContext>

    <layout expandLayout="true" expand="procRolesSplit">
        <split id="procRolesSplit" orientation="vertical">
            <vbox spacing="true" expand="cardProcTable">
                <grid spacing="true" width="100%">
                    <columns>
                        <column/>
                        <column/>
                        <column/>
                        <column flex="1"/>
                    </columns>
                    <rows>
                        <row>
                            <lookupField id="createProcLookup" width="150"/>
                            <button id="removeProc" action="cardProcTable.remove" icon="icons/remove.png"/>
                            <button id="startProc" visible="false"/>
                        </row>
                    </rows>
                </grid>
                <table id="cardProcTable">
                    <columns>
                        <column id="proc.name" caption="msg://process"/>
                        <column id="active" caption="msg://active"/>
                        <column id="startCount" caption="msg://startCount"/>
                        <column id="locState" caption="msg://state"/>
                    </columns>
                    <rows datasource="cardProcDs"/>
                </table>
            </vbox>
            <iframe id="cardRolesFrame" src="/com/haulmont/workflow/web/ui/base/card-roles-frame.xml"/>
        </split>
    </layout>

</window>