<!--
  ~ Copyright (c) 2008-2013 Haulmont. All rights reserved.
  ~ Use is subject to license terms, see http://www.cuba-platform.com/license for details.
  -->

<window
        xmlns="http://schemas.haulmont.com/cuba/5.3/window.xsd"
        class="com.haulmont.workflow.gui.app.base.ReassignForm"
        messagesPack="com.haulmont.workflow.gui.app.base"
        caption="msg://reassign.caption">

    <dsContext>
        <!--todo: remove view with attachments-->
        <datasource id="cardDs" class="com.haulmont.workflow.core.entity.Card" view="w-attachments"/>

        <collectionDatasource id="cardRolesDs" class="com.haulmont.workflow.core.entity.CardRole"
                              view="transition-form">
            <query>
                <![CDATA[select cr from wf$CardRole cr
                where cr.card.id = :param$card and cr.procRole.proc.id = :param$card.proc
                order by cr.code]]>
            </query>
        </collectionDatasource>
    </dsContext>

    <#assign width=400>
    <#assign labelWidth=90>

    <layout expand="cardRolesFrame" spacing="true">
        <iframe id="cardRolesFrame" screen="cardRolesFrame"/>
        <hbox id="commentTextPane">
            <label value="msg://comment" width="${labelWidth}"/>
            <textField id="commentText" width="${width}" rows="4" maxLength="4000"/>
        </hbox>
        <vbox margin="true">
            <iframe id="windowActions" src="/com/haulmont/cuba/gui/edit-window.actions.xml"/>
        </vbox>
    </layout>
</window>



